# 🐍 Advanced GitHub Snake Animation Generator (SVG only)
name: 🚀 Generate Advanced Snake Animations

on:
  schedule:
    # Runs every 8 hours
    - cron: "0 */8 * * *"
  workflow_dispatch:
  push:
    branches: [ "main", "master" ]
    paths-ignore:
      - 'README.md'
      - 'docs/**'

jobs:
  # Job 1: Generate a matrix of standard snake themes
  generate-snakes:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    timeout-minutes: 15
    strategy:
      fail-fast: false
      matrix:
        include:
          - { name: "neon-cyberpunk" }
          - { name: "ocean-blue" }
          - { name: "sunset-gradient" }
          - { name: "matrix-green" }

    steps:
      - name: 🏗️ Checkout
        uses: actions/checkout@v4

      - name: 🌈 Generate Neon Cyberpunk (SVG)
        if: matrix.name == 'neon-cyberpunk'
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-neon-cyberpunk.svg?color_snake=%23ff00ff&color_dots=%23ff00ff,%23ff3399,%23ff6633,%23ffff00,%2300ffff
            dist/snake-neon-cyberpunk-dark.svg?palette=github-dark&color_snake=%23ff00ff&color_dots=%23ff00ff,%23ff3399,%23ff6633,%23ffff00,%2300ffff

      - name: 🌊 Generate Ocean Blue (SVG)
        if: matrix.name == 'ocean-blue'
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-ocean-blue.svg?color_snake=%23004d7a&color_dots=%23e6f3ff,%23b3d9ff,%2366b3ff,%230080ff,%23004d7a
            dist/snake-ocean-blue-dark.svg?palette=github-dark&color_snake=%230099ff&color_dots=%23004d7a,%230066cc,%230080ff,%2333a3ff,%2366b3ff

      - name: 🌅 Generate Sunset Gradient (SVG)
        if: matrix.name == 'sunset-gradient'
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-sunset.svg?color_snake=%23ff4500&color_dots=%23ffebcd,%23ffa500,%23ff6347,%23dc143c,%23b22222
            dist/snake-sunset-dark.svg?palette=github-dark&color_snake=%23ff6347&color_dots=%23ffebcd,%23ffa500,%23ff6347,%23dc143c,%23b22222

      - name: 🔋 Generate Matrix Green (SVG)
        if: matrix.name == 'matrix-green'
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-matrix.svg?color_snake=%2300ff00&color_dots=%23003300,%23006600,%23009900,%2300cc00,%2300ff00
            dist/snake-matrix-dark.svg?palette=github-dark&color_snake=%2300ff41&color_dots=%23003300,%23004d00,%23006600,%23008f11,%2300ff41

      - name: 📤 Upload SVGs (artifact per theme)
        uses: actions/upload-artifact@v4
        with:
          name: snakes-${{ matrix.name }}
          path: dist/*.svg
          if-no-files-found: error

  # Job 2: Generate special, one-off themes
  generate-special-animations:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    timeout-minutes: 10
    needs: generate-snakes
    steps:
      - name: 🏗️ Checkout
        uses: actions/checkout@v4

      - name: 🏳️‍🌈 Rainbow (SVG)
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-rainbow.svg?color_snake=%23ff0000&color_dots=%23ff0000,%23ff8000,%23ffff00,%2300ff00,%230080ff
            dist/snake-rainbow-dark.svg?palette=github-dark&color_snake=%23ff4080&color_dots=%23ff0000,%23ff8000,%23ffff00,%2300ff00,%230080ff

      - name: 🐙 GitHub Official (SVG)
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-github.svg?color_snake=%23238636&color_dots=%23ebedf0,%239be9a8,%2340c463,%2330a14e,%23216e39
            dist/snake-github-dark.svg?palette=github-dark&color_snake=%2339d353&color_dots=%23161b22,%230d1117,%23006d32,%2326a641,%2339d353

      - name: ⚫ Minimalist B/W (SVG)
        uses: Platane/snk/svg-only@v3
        with:
          github_user_name: MattYudha
          outputs: |
            dist/snake-minimal.svg?color_snake=%23000000&color_dots=%23ffffff,%23cccccc,%23999999,%23666666,%23000000
            dist/snake-minimal-dark.svg?palette=github-dark&color_snake=%23ffffff&color_dots=%23000000,%23333333,%23666666,%23999999,%23ffffff

      - name: 📤 Upload SVGs (special themes)
        uses: actions/upload-artifact@v4
        with:
          name: snakes-special
          path: dist/*.svg
          if-no-files-found: error

  # Job 3: Deploy all generated animations to the 'output' branch
  deploy-animations:
    permissions:
      contents: write
    runs-on: ubuntu-latest
    needs: [generate-snakes, generate-special-animations]
    timeout-minutes: 10
    steps:
      - name: 🏗️ Checkout
        uses: actions/checkout@v4

      - name: 📥 Download all artifacts
        uses: actions/download-artifact@v4
        with:
          path: dist

      - name: 🚚 Organize downloaded files
        run: find dist -type f -name "*.svg" -exec mv {} dist/ \;

      - name: 📄 Generate Animation Gallery
        run: |
          cat > dist/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>🐍 MattYudha's Snake Animation Gallery</title>
            <style>
              *{box-sizing:border-box}body{background:#0d1117;color:#f0f6fc;font-family:system-ui,Segoe UI,sans-serif;padding:2rem}
              .container{max-width:1200px;margin:0 auto}
              h1{text-align:center;font-size:2.5rem;margin:0 0 2rem;background:linear-gradient(45deg,#58a6ff,#39d353);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
              .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(360px,1fr));gap:1.5rem}
              .card{background:#11161c;border:1px solid #30363d;border-radius:14px;padding:1rem}
              .card h3{color:#58a6ff;text-align:center;margin-bottom:0.8rem}
              .card img{width:100%;border-radius:8px;background:#0d1117;padding:0.75rem}
            </style>
          </head>
          <body>
            <div class="container">
              <h1>🐍 Snake Animation Gallery</h1>
              <div class="gallery">
                <div class="card"><h3>🌈 Neon Cyberpunk</h3><img src="snake-neon-cyberpunk-dark.svg" alt="Neon Cyberpunk"/></div>
                <div class="card"><h3>🌊 Ocean Blue</h3><img src="snake-ocean-blue-dark.svg" alt="Ocean Blue"/></div>
                <div class="card"><h3>🌅 Sunset</h3><img src="snake-sunset-dark.svg" alt="Sunset"/></div>
                <div class="card"><h3>🔋 Matrix</h3><img src="snake-matrix-dark.svg" alt="Matrix"/></div>
                <div class="card"><h3>🏳️‍🌈 Rainbow</h3><img src="snake-rainbow-dark.svg" alt="Rainbow"/></div>
                <div class="card"><h3>🐙 GitHub</h3><img src="snake-github-dark.svg" alt="GitHub"/></div>
                <div class="card"><h3>⚫ Minimal</h3><img src="snake-minimal-dark.svg" alt="Minimal"/></div>
              </div>
            </div>
          </body>
          </html>
          EOF

      - name: 🚀 Deploy to output branch
        uses: crazy-max/ghaction-github-pages@v4
        with:
          target_branch: output
          build_dir: dist
          commit_message: "🐍 Update snake animations [skip ci]"
          keep_history: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
